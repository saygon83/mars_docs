# Topic 1. tts — текст для озвучки

## Описание

Топик предназначен для передачи текстов на озвучку в микросервис Audio-proxy.

## Обработка топика tts

Сообщения топика tts обрабатываются в методе Audio-proxy.Synthesize — он озвучивает текстовое сообщение, а после отправляет в SDK текст для чата и аудио с озвученным сообщением.

## Структура

| Параметр        | Тип    | Обязательность | Описание                                                                                                   | Комментарий                                                                                       |
|-----------------|--------|----------------|------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| text        | STRING | ДА             | Текстовое сообщение для отображения в текстовом бабле в чате.                                              | Может быть пустым - тогда поле text в запросе Audio-proxy.Synthesize будет пустым.                |
| tts         | STRING | ДА             | Текстовое сообщение для озвучки.                                                                           | Может быть пустым - тогда запрос на озвучку в AudioKit StreamingSynthesize не будет отправлен.    |
| eventType   | ENUM   | ДА             | Тип сообщения. Возможные значения: SUCCESS, ERROR, SYSTEM_ERROR, UNDEFINED, QEUSTION, VOICE, TOGGLE.       | Сейчас используются только значения "SUCCESS" и "ERROR".                                          |
| eventContent| STRING | НЕТ            | Описание действия, которое запросил пользователь или наименование ошибки.                                  | Данные для АppMetrica и МТС Аналитики. Параметр пока что не используется.                         |
| eventContext| STRING | НЕТ            | Наименование навыка, в рамках которого действие было выполнено успешно.                                    | Данные для АppMetrica и МТС Аналитики. Заполняется в соответствии с таблицей.                     |
| isStopListening | BOOL | НЕТ          | Флаг, сообщающий SDK о том, должен ли он переходить в режим STANDBY после воспроизведения озвученного сообщения. | Заполняется на nlp-proxy из конфигурационного файла либо в сценариях skill-service.              |
| replies     | ARRAY  | ДА             | Массив текстовых сообщений.                                                                                |                                                                                                   |

### Атрибуты объектов в массиве replies:

- text (STRING, ДА): Текстовое сообщение для отображения в текстовом бабле в чате. Может быть пустым.
- tts (STRING, ДА): Текстовое сообщение для озвучки. Может быть пустым.
- id (STRING, НЕТ): Идентификатор текстового сообщения.

## Примеры сообщений

### Умный дом

```json
{
    "content": "Убедитесь, что вы добавили устройство в приложении Умный дом",
    "eventType": "ERROR",
    "eventContext": "smartHome",
    "isStopListening": "true"
}
Погода

{
    "content": "Сейчас в Москве -2, переменная облачность.",
    "eventType": "SUCCESS",
    "eventContext": "weather",
    "isStopListening": "true"
}
Время

{
    "content": "Сейчас 11:52.",
    "eventType": "SUCCESS",
    "eventContext": "dateTime",
    "isStopListening": "true"
}
Музыка

{
    "content": "Включаю",
    "eventType": "SUCCESS",
    "isStopListening": true,
    "eventContext": "mts_music",
    "eventContent": null
}
```
